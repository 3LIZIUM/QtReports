#sudo: false
language: cpp

compiler: 
  - gcc
  - clang
  
#addons:
#  apt:
#    sources:
#    - ubuntu-toolchain-r-test
#    - ubuntu-sdk-team
#    packages:
#    - gcc-4.8
#    - g++-4.8
#    - clang
#    - qtbase5-dev
#    - qt5-default
#    - qttools5-dev-tools
  
before_install:
  - sudo add-apt-repository --yes ppa:ubuntu-sdk-team/ppa
  - sudo add-apt-repository --yes ppa:ubuntu-toolchain-r/test
  - if [ "$CXX" = "clang++" ]; then sudo apt-add-repository --yes ppa:beineri/opt-qt551; fi
  - sudo apt-get update -qq
  - sudo apt-get install gcc-4.8 g++-4.8 clang
  - if [ "$CXX" = "clang++" ]; then sudo apt-get install qt-latest qtcreator-latest; fi
  - if [ "$CXX" = "g++" ]; then sudo apt-get install sudo apt-get install qtbase5-dev qtdeclarative5-dev libqt5webkit5-dev libsqlite3-dev; fi
  - if [ "$CXX" = "g++" ]; then sudo apt-get install qt5-default qttools5-dev-tools; fi
 
install:
#  - if [ "$CXX" = "g++" ]; then export CXX="g++-4.8" CC="gcc-4.8"; fi
#  - export QMAKE_CC="$CC"
#  - export QMAKE_CXX="$CXX"
   
# before_script:
  # - mkdir build
  # - cd build
  # - cmake ..
  
script:
  - cd QtReports/QtReports
  - if [ "$CXX" = "g++" ]; then qmake qtreports.pro; fi
  - if [ "$CXX" = "clang++" ]; then qmake qtreports.pro -spec linux-clang; fi
  - make
 
#  notifications:
#  email: 
#    - xxx@users.sourceforge.net
#   on_success: change
#   on_failure: always
